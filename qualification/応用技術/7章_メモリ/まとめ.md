## メモリの分類
- RAM(Random Access Memory)
  - RAMは読み書き可
  - 揮発性(電源を切ると消去される)
- ROM(Read Only Memory)
  - ROMは読み出し専用
  - 不揮発性(電源を切ってもデータを保持)

## RAMの種類
- DRAM(Dynamic RAM)
  - 主記憶装置として使用される。
  - 読み書きはSRAMに比べて低速
  - 記憶内容を保持するには定期的にリフレッシュ動作が必要
- SRAM(Static RAM)
  - 高速だが、価格も高い
  - キャッシュメモリとして用いられる。

## ROMの種類
- PROM
  - 基本的には読み出しだけ。だが、書き込みと消去もできる。カメラで使用されているメモリカード(SDカード)のこの一種

- マスクROM
  - 読み出し専用のメモリ。製造時にデータを書き込んでからデータを書き換えることはできない。
- PROM
  - EPROM(Erasable PROM)
    - 紫外線でデータを消去して書き換えられる。
  - EEPROM(Electrically EPROM)
    - 電気的にデータを消去して書き換えられる。
  - フラッシュメモリ
    - 全消去ではなく、ブロックごと(フォルダごとなど)にデータを消去して書き換えることができる。

## 主記憶装置と高速化手法
- アクセスの速度は下記のようになる
  - CPUのレジスタ > メモリ > ハードディスク
  - CPUレジスタとメモリ、メモリとハードディスクの間では速度差に大きな差がある。
  - 装置間の速度ギャップを緩和させるために下記が存在する
    - レジスタとメモリの間にはキャッシュメモリ
    - メモリとハードディスクの間にはディスクキャッシュ

### キャッシュメモリ
- メモリから読み込んだデータはキャッシュメモリに保存
- 同じデータを読み込む際はキャッシュメモリから取得
- ただし、CPUに保持されているキャッシュメモリのサイズはかなり小さい...
  - その場合はCPUの外側にあるSRAMが保持をする
  - 上記のように、キャッシュは1つではなく、1次キャッシュ、2次キャッシュと重ねて設置できる。

### プログラムの局所参照性
- キャッシュが有用である理由
  - 時間的局所性
    - 最近使用されたデータほど再度アクセスされる可能性が高い
  - 空間的局所性
    - 使われたデータの近くのデータは再度アクセスされる可能性が高い
  - 逐次的局所性
    - 使われたデータの隣はアクセスされる可能性が高い

## 主記憶装置への書き込み方式
- キャッシュメモリへ書き出しを行った場合は、整合性をとるためメモリの値も更新する必要がある。
- 主記憶装置を書き換える方式にはライトスルー方式とライトバック方式が存在する
  - ライトスルー方式
    - キャッシュメモリを書き込む際に同時にメモリにも書き込む
  - ライトバック方式
    - キャッシュメモリしかデータを書き込まない。
    - キャッシュメモリから追い出された時、その反映データをメモリに反映させる。

## ヒット率と実効アクセス時間
- 目的とするデータがキャッシュメモリに入っている確率をヒット率という
- ヒット率から算出される、キャッシュにアクセスする割合とメモリにアクセスする割合から、実際に実効アクセス時間を求められる。

## キャッシュメモリの割り当て方式
- 主記憶上のデータはブロックという単位ごとにキャッシュメモリへの割り当てが行われる。
- ダイレクトマッピング方式
  - 1つのメモリブロックをキャッシュ内の単一のロケーションに割り当てる方式。ハッシュ演算から主記憶のブロック番号からキャッシュ内のロケーションを求める
- フルアソシアティブ方式
  - キャッシュ内の任意のロケーションに割り当てる方式。キャッシュメモリの空いている場所を使用する。
- セットアソシアティブ方式
  - メモリブロックをキャッシュ内の2つ以上の配置可能なロケーションに割り当てる方式。

## メモリインターリーブ
- メモリを複数の区画(バンク)に分割する
- 複数バンクを同時にアクセスすると、連続した番地のデータを一気に読み込むことができる。

